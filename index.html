<!DOCTYPE html>
<html lang="en-GB">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>UK Petition data - By country</title>

		<meta property="og:title" content="Live Petition Data - By country" />
		<meta property="og:type" content="Website" />
		<meta
			property="og:url"
			content="https://YOUR_GH_USERNAME.github.io/YOUR_REPO_NAME/"
		/>
		<meta
			property="og:image"
			content="https://YOUR_GH_USERNAME.github.io/YOUR_REPO_NAME/img/og.jpg"
		/>
		<meta
			property="og:description"
			content="Updated live feed parsed from UK government petitions website data."
		/>

		<!-- External Libraries -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<link
			href="https://unpkg.com/tabulator-tables@4.2.3/dist/css/tabulator_site.min.css"
			rel="stylesheet"
		/>
		<script src="https://unpkg.com/tabulator-tables@4.2.3/dist/js/tabulator.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.0.5/jspdf.plugin.autotable.js"></script>

		<link
			href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.7/css/flag-icon.min.css"
			rel="stylesheet"
		/>
		<!-- Stylesheets -->
		<link rel="stylesheet" href="css/normalize.css" />
		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="css/style.css" />

		<!-- Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=UA-146596143-1"
		></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());
			gtag("config", "UA-146596143-1");
		</script>
	</head>

	<body id="petition">
		<div class="flex-container container">
			<header>
				<h1 class="top-cat">
					LIVE UK PETITION DATA <br />
					<small
						>(Updated at: <time class="updatedAt" datetime=""></time>)</small
					>
				</h1>

				<!-- Signature History Chart -->
				<div class="history-chart-container">
					<div class="chart-controls">
						<label for="chart-mode">Chart:</label>
						<select id="chart-mode" aria-label="Chart display mode">
							<option value="jumps">Jumps (positive only)</option>
							<option value="raw">Raw total</option>
						</select>
					</div>
					<div
						class="history-chart"
						aria-label="Signature growth rate over time"
						role="img"
					></div>
					<small class="chart-label">Signatures per 10 seconds</small>
				</div>

				<a
					target="_blank"
					class="clear-dec plink"
					href="#"
					aria-label="View petition on parliament website"
				>
					<h2 class="titleHeader"></h2>
				</a>

				<div class="signature-counter">
					<span
						class="h1 totalSigs counter"
						aria-label="Total signatures"
					></span>
					<span class="counter" aria-hidden="true"></span>
				</div>

				<p class="counter-text">
					signatures from <span class="noOfCountries"></span> countries
				</p>

				<div class="status-indicator">
					<h2>
						Status: <span class="jump" aria-live="polite">Updating...</span>
					</h2>
				</div>
			</header>

			<main class="flex-container">
				<!-- Regional Statistics -->
				<section class="statistics-grid">
					<div
						id="uk"
						class="info-box uk"
						role="region"
						aria-labelledby="uk-heading"
					>
						<strong id="uk-heading">UK:</strong>
						<span class="ukOnly blue"></span>
						<span class="ukOnlyPc"></span>
						<div id="totalJumpUk" class="jump-indicator"></div>
					</div>
					<div
						id="eng"
						class="info-box engl"
						role="region"
						aria-labelledby="england-heading"
					>
						<strong id="england-heading">England:</strong>
						<span class="englandOnly"></span>
						<span class="englandOnlyPc"></span>
						<div id="totalJumpEngland" class="jump-indicator"></div>
					</div>
					<div
						id="sco"
						class="info-box scot"
						role="region"
						aria-labelledby="scotland-heading"
					>
						<strong id="scotland-heading">Scotland:</strong>
						<span class="scotlandOnly"></span>
						<span class="scotlandOnlyPc"></span>
						<div id="totalJumpScotland" class="jump-indicator"></div>
					</div>
					<div
						id="wal"
						class="info-box wale"
						role="region"
						aria-labelledby="wales-heading"
					>
						<strong id="wales-heading">Wales:</strong>
						<span class="walesOnly"></span>
						<span class="walesOnlyPc"></span>
						<div id="totalJumpWales" class="jump-indicator"></div>
					</div>
					<div
						id="ire"
						class="info-box irel"
						role="region"
						aria-labelledby="northern-ireland-heading"
					>
						<strong id="northern-ireland-heading">N. Ireland:</strong>
						<span class="irelandOnly"></span>
						<span class="irelandOnlyPc"></span>
						<div id="totalJumpIreland" class="jump-indicator"></div>
					</div>
					<div
						id="nonuk"
						class="info-box ls nouk"
						role="region"
						aria-labelledby="non-uk-heading"
					>
						<strong id="non-uk-heading">Non-UK:</strong>
						<span class="nonukOnly"></span>
						<span class="nonukOnlyPc"></span>
						<div id="totalJumpNonUk" class="jump-indicator"></div>
					</div>
				</section>

				<!-- Call to Action -->
				<a
					class="sign link button1"
					href="#"
					role="button"
					aria-label="Sign this petition"
				>
					SIGN THIS PETITION
				</a>

				<!-- Settings Panel (relocated below single CTA) -->
				<div class="settings-panel" id="settings-panel">
					<button
						id="settings-toggle-btn"
						aria-expanded="false"
						aria-controls="settings-content"
					>
						<span class="settings-label">Settings</span>
						<svg
							class="arrow"
							width="12"
							height="12"
							viewBox="0 0 12 12"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
							aria-hidden="true"
							focusable="false"
						>
							<path
								d="M2 5L6 9L10 5"
								stroke="currentColor"
								stroke-width="1.6"
								stroke-linecap="round"
								stroke-linejoin="round"
							/>
						</svg>
					</button>
					<div
						id="settings-content"
						class="hidden"
						role="region"
						aria-label="Display and animation settings"
					>
						<div class="settings-row">
							<button
								type="button"
								class="settings-block"
								id="flag-toggle-block"
								aria-pressed="false"
								aria-controls="flag-toggle"
								aria-label="Toggle falling flags animation"
							>
								<span class="block-title">Falling flags</span>
								<span class="block-desc"
									>Toggle flags that fall for new signatures</span
								>
								<span class="block-state" id="flag-toggle-state">Off</span>
							</button>
							<input
								type="checkbox"
								id="flag-toggle"
								class="visually-hidden"
								hidden
							/>
						</div>
						<div class="settings-row">
							<select id="animation-mode" aria-label="Select animation style">
								<option value="drop">Drop</option>
								<option value="stream">Stream</option>
								<option value="march">March</option>
							</select>
							<label for="animation-mode">Animation Style</label>
							<small
								>"Drop" shows all flags at once, "Stream" spreads them
								out</small
							>
						</div>
						<div class="settings-row">
							<button
								type="button"
								class="settings-block"
								id="constituency-labels-block"
								aria-pressed="true"
								aria-controls="constituency-labels-toggle"
								aria-label="Toggle constituency labels on flags"
							>
								<span class="block-title">Constituency labels</span>
								<span class="block-desc"
									>Show constituency names on UK flags</span
								>
								<span class="block-state" id="constituency-labels-state"
									>On</span
								>
							</button>
							<input
								type="checkbox"
								id="constituency-labels-toggle"
								class="visually-hidden"
								hidden
								checked
							/>
						</div>
						<div class="settings-row">
							<button
								type="button"
								id="reset-graph-btn"
								class="settings-block danger"
								aria-label="Reset graph data"
							>
								<span class="block-title">Reset Graph</span>
								<span class="block-desc"
									>Clear all graph history and start fresh</span
								>
							</button>
						</div>
					</div>
				</div>

				<!-- Data Table -->
				<section
					class="table-section"
					role="region"
					aria-labelledby="table-heading"
				>
					<h3 id="table-heading" class="sr-only">Petition Data by Country</h3>
					<div
						class="flex-item"
						id="example-table"
						role="table"
						aria-label="Petition signatures by country"
					></div>
				</section>

				<!-- Download Controls -->
				<section
					class="table-controls"
					role="region"
					aria-labelledby="download-heading"
				>
					<h3 id="download-heading" class="sr-only">Download Options</h3>
					<button id="download-csv" type="button">Download CSV</button>
					<button id="download-json" type="button">Download JSON</button>
					<button id="download-xlsx" type="button">Download XLSX</button>
					<button id="download-pdf" type="button">Download PDF</button>
				</section>

				<!-- Footer Links -->
				<footer>
					<h4>
						<a
							class="json"
							target="_blank"
							href="#"
							aria-label="View raw JSON data"
							>JSON data</a
						>
						parsed from:
						<a
							class="plink"
							target="_blank"
							href="#"
							aria-label="Visit UK Parliament petitions website"
							>petition.parliament.uk</a
						>
					</h4>
				</footer>
			</main>
		</div>

		<!-- Application Scripts -->
		<script src="label_patcher.js"></script>
		<script src="js/petitionTracker.js"></script>
		<script src="js/flags.js"></script>
		<script src="js/app-init.js"></script>
		<script src="js/settingsPanel.js"></script>
		<script src="http://oss.sheetjs.com/js-xlsx/xlsx.full.min.js"></script>
	</body>
</html>
